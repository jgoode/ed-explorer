{"version":3,"sources":["../../../api/controllers/ExpeditionController.js"],"names":["module","exports","getCurrent","req","res","Expedition","query","err","data","ResponseService","json","responseData","expedition","rows","length","status"],"mappings":";;AAAA;;;;;;;AAOAA,OAAOC,OAAP,GAAiB;AACjB;;;;;;;;;;;;;;AAcEC,cAAY,oBAASC,GAAT,EAAcC,GAAd,EAAmB;;AAE7BC,eAAWC,KAAX,CAAiB,kDAAjB,EAAqE,UAASC,GAAT,EAAcC,IAAd,EAAoB;AACvF,UAAID,GAAJ,EAAS;AACP,eAAOE,gBAAgBC,IAAhB,CAAqB,GAArB,EAA0BN,GAA1B,EAA+B,sBAA/B,EAAuDG,GAAvD,CAAP;AACD;AACD,UAAII,eAAe;AACjBC,oBAAa;AADI,OAAnB;;AAIA,UAAIJ,IAAJ,EAAU;AACR,YAAIA,KAAKK,IAAL,CAAUC,MAAV,GAAmB,CAAvB,EAA0B;AACxBH,yBAAe;AACbC,wBAAYJ,KAAKK,IAAL,CAAU,CAAV;AADC,WAAf;AAGD;AACF;;AAED,aAAOT,IAAIW,MAAJ,CAAW,GAAX,EAAgBL,IAAhB,CAAqBC,YAArB,CAAP;AACD,KAjBD;AAkBD;AAnCc,CAAjB","file":"ExpeditionController.js","sourcesContent":["/**\n * ExpeditionController\n *\n * @description :: Server-side logic for managing expeditions\n * @help        :: See http://sailsjs.org/#!/documentation/concepts/Controllers\n */\n\nmodule.exports = {\n/*\tcreate: function(req, res) {\n\t  Expedition.create(req.body).then(function(expedition) {\n\t    var responseData = {\n\t      expedition: expedition\n      }\n      return ResponseService.json(200, res, \"Expedition created successfully\", responseData)\n    }).catch(function (error) {\n        if (error.invalidAttributes){\n          return ResponseService.json(400, res, \"Expedition could not be created\", error.Errors)\n        }\n      }\n    )\n  } */\n\n  getCurrent: function(req, res) {\n\n    Expedition.query('SELECT * from expedition where \"EndDate\" is null', function(err, data) {\n      if (err) {\n        return ResponseService.json(400, res, \"Error(s) encountered\", err)\n      }\n      var responseData = {\n        expedition : {}\n      }\n      \n      if (data) {\n        if (data.rows.length > 0) {\n          responseData = {\n            expedition: data.rows[0]\n          }\n        }\n      }\n  \n      return res.status(200).json(responseData);\n    });\n  }\n};\n\n"]}